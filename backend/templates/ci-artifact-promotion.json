{
  "id": "ci-artifact-promotion",
  "title": "CI: Artifact Promotion",
  "description": "Promote build artifacts from staging to production after approvals and tests.",
  "category": "CI/CD",
  "tags": ["ci", "release", "artifacts"],
  "sample_input": {"artifact": "app:1.2.3"},
  "graph": {
    "nodes": [
      {
        "id": "in",
        "type": "input",
        "position": {"x": 0, "y": 0},
        "data": {"label": "Ready for promotion"}
      },
      {
        "id": "request_approval",
        "type": "http",
        "position": {"x": 220, "y": 0},
        "data": {
          "label": "Request approval",
          "config": {"method": "POST", "url": "https://approvals.api/request", "body": "{{ trigger.artifact }}"}
        }
      },
      {
        "id": "promote",
        "type": "http",
        "position": {"x": 440, "y": 0},
        "data": {
          "label": "Promote artifact",
          "config": {"method": "POST", "url": "https://repo.api/promote", "body": "{{ trigger.artifact }}"}
        }
      },
      {
        "id": "notify",
        "type": "http",
        "position": {"x": 660, "y": 0},
        "data": {
          "label": "Notify",
          "config": {"method": "POST", "url": "https://slack.api/post", "body": "Artifact promoted"}
        }
      }
    ],
    "edges": [
      {"id": "e1", "source": "in", "target": "request_approval"},
      {"id": "e2", "source": "request_approval", "target": "promote"},
      {"id": "e3", "source": "promote", "target": "notify"}
    ]
  }
}
