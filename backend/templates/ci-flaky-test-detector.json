{
  "id": "ci-flaky-test-detector",
  "title": "CI: Flaky Test Detector",
  "description": "Track test failures across runs, detect flaky tests and label for triage.",
  "category": "CI/CD",
  "tags": ["ci","tests","flaky"],
  "sample_input": {"test_suite":"suite-a"},
  "graph": {
    "nodes": [
      {"id":"in","type":"input","position":{"x":0,"y":0},"data":{"label":"Scheduled"}},
      {"id":"fetch_history","type":"http","position":{"x":220,"y":0},"data":{"label":"Fetch history","config":{"method":"GET","url":"https://ci.api/tests/history?suite={{ trigger.test_suite }}"}}},
      {"id":"detect","type":"action","position":{"x":440,"y":0},"data":{"label":"Detect flaky","config":{"language":"python","code":"# analyze failure patterns\nreturn {\"flaky_tests\": []}"}}},
      {"id":"label","type":"http","position":{"x":660,"y":0},"data":{"label":"Label tests","config":{"method":"POST","url":"https://repo.api/label","body":"{{ node_results.detect }}"}}}
    ],
    "edges":[
      {"id":"e1","source":"in","target":"fetch_history"},
      {"id":"e2","source":"fetch_history","target":"detect"},
      {"id":"e3","source":"detect","target":"label"}
    ]
  }
}