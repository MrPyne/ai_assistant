{
  "id": "fin-expense-approval",
  "title": "Finance: Expense Approval",
  "description": "Route submitted expenses for approval, auto-approve below threshold, notify finance team for exceptions.",
  "category": "Finance",
  "tags": ["finance","expenses","approval"],
  "sample_input": {"expense_id":"EXP-1"},
  "graph": {
    "nodes": [
      {
        "id": "in",
        "type": "input",
        "position": {"x": 0, "y": 0},
        "data": {"label": "Expense Submitted"}
      },
      {
        "id": "fetch",
        "type": "http",
        "position": {"x": 220, "y": 0},
        "data": {
          "label": "Get Expense",
          "config": {
            "method": "GET",
            "url": "https://expenses.api/expenses/{{ trigger.expense_id }}"
          }
        }
      },
      {
        "id": "evaluate",
        "type": "action",
        "position": {"x": 440, "y": 0},
        "data": {
          "label": "Auto-Approve?",
          "config": {
            "language": "python",
            "code": "e = json.loads(input.get('body','{}'))\\nif e.get('amount',0) < 100:\\n    return {'auto_approve': True}\\nreturn {'auto_approve': False}"
          }
        }
      },
      {
        "id": "approve",
        "type": "http",
        "position": {"x": 660, "y": 0},
        "data": {
          "label": "Approve",
          "config": {
            "method": "POST",
            "url": "https://expenses.api/expenses/{{ trigger.expense_id }}/approve"
          }
        }
      },
      {
        "id": "notify_finance",
        "type": "http",
        "position": {"x": 660, "y": 120},
        "data": {
          "label": "Notify Finance",
          "config": {
            "method": "POST",
            "url": "https://hooks.slack.com/services/...",
            "body": "Expense {{ trigger.expense_id }} requires review"
          }
        }
      }
    ],
    "edges": [
      {"id": "e1", "source": "in", "target": "fetch"},
      {"id": "e2", "source": "fetch", "target": "evaluate"},
      {"id": "e3", "source": "evaluate", "target": "approve"},
      {"id": "e4", "source": "evaluate", "target": "notify_finance"}
    ]
  }
}
