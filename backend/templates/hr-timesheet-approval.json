{
  "id": "hr-timesheet-approval",
  "title": "HR: Timesheet Approval Reminder",
  "description": "Send weekly reminders to managers to approve timesheets and escalate overdue approvals.",
  "category": "HR",
  "tags": ["hr", "timesheets", "approval"],
  "sample_input": {"week_start": "2025-10-13"},
  "graph": {
    "nodes": [
      {
        "id": "in",
        "type": "input",
        "position": {"x": 0, "y": 0},
        "data": {"label": "Scheduler"}
      },
      {
        "id": "fetch_pending",
        "type": "http",
        "position": {"x": 220, "y": 0},
        "data": {
          "label": "Fetch Pending Timesheets",
          "config": {
            "method": "GET",
            "url": "https://hr.api/timesheets/pending?week={{ trigger.week_start }}"
          }
        }
      },
      {
        "id": "notify",
        "type": "action",
        "position": {"x": 440, "y": 0},
        "data": {
          "label": "Notify Managers",
          "config": {
            "language": "python",
            "code": "import json\npending = json.loads(input.get('body','[]'))\n# group by manager and send reminders\nreturn {'notified': True, 'count': len(pending)}"
          }
        }
      },
      {
        "id": "escalate",
        "type": "http",
        "position": {"x": 660, "y": 0},
        "data": {
          "label": "Escalate Overdue",
          "config": {
            "method": "POST",
            "url": "https://hooks.slack.com/services/...",
            "body": "Overdue timesheets: {{ node_results.notify.count }}"
          }
        }
      }
    ],
    "edges": [
      {"id": "e1", "source": "in", "target": "fetch_pending"},
      {"id": "e2", "source": "fetch_pending", "target": "notify"},
      {"id": "e3", "source": "notify", "target": "escalate"}
    ]
  }
}