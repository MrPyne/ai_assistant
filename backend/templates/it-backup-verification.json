{
  "id": "it-backup-verification",
  "title": "IT: Backup Verification",
  "description": "Verify backups were completed and attempt restore to a staging environment for smoke validation.",
  "category": "IT/Operations",
  "tags": ["it", "backup", "recovery"],
  "sample_input": {"date": "2025-07-31"},
  "graph": {
    "nodes": [
      {
        "id": "in",
        "type": "input",
        "position": {"x": 0, "y": 0},
        "data": {"label": "Daily schedule"}
      },
      {
        "id": "check_s3",
        "type": "http",
        "position": {"x": 220, "y": 0},
        "data": {
          "label": "Check S3 backups",
          "config": {"method": "GET", "url": "https://s3.api/list?prefix=backups/{{ trigger.date }}"}
        }
      },
      {
        "id": "attempt_restore",
        "type": "http",
        "position": {"x": 440, "y": 0},
        "data": {
          "label": "Attempt restore",
          "config": {"method": "POST", "url": "https://restore.api/attempt", "body": "{{ node_results.check_s3 }}"}
        }
      },
      {
        "id": "validate",
        "type": "action",
        "position": {"x": 660, "y": 0},
        "data": {
          "label": "Run validate",
          "config": {
            "language": "python",
            "code": "# run smoke checks on restored instance\\nreturn {\"ok\": true}"
          }
        }
      },
      {
        "id": "alert",
        "type": "http",
        "position": {"x": 880, "y": 0},
        "data": {
          "label": "Alert if fail",
          "config": {"method": "POST", "url": "https://pager.api/alert", "body": "Restore failed"}
        }
      }
    ],
    "edges": [
      {"id": "e1", "source": "in", "target": "check_s3"},
      {"id": "e2", "source": "check_s3", "target": "attempt_restore"},
      {"id": "e3", "source": "attempt_restore", "target": "validate"},
      {"id": "e4", "source": "validate", "target": "alert"}
    ]
  }
}
