{
  "id": "it-config-drift-detection",
  "title": "IT: Config Drift Detection",
  "description": "Compare live machine configs to desired state and open tickets for drift remediation.",
  "category": "IT/Operations",
  "tags": ["it", "config", "devops"],
  "sample_input": {"env": "prod"},
  "graph": {
    "nodes": [
      {"id": "in", "type": "input", "position": {"x": 0, "y": 0}, "data": {"label": "Daily"}},
      {"id": "fetch_live", "type": "http", "position": {"x": 220, "y": 0}, "data": {"label": "Fetch live configs", "config": {"method": "GET", "url": "https://inventory.api/configs?env={{ trigger.env }}"}}},
      {"id": "fetch_desired", "type": "http", "position": {"x": 220, "y": 120}, "data": {"label": "Fetch desired", "config": {"method": "GET", "url": "https://repo.api/desired_configs?env={{ trigger.env }}"}}},
      {"id": "compare", "type": "action", "position": {"x": 440, "y": 60}, "data": {"label": "Compare", "config": {"language": "python", "code": "# produce drift list\\nreturn {'drift': []}"}}},
      {"id": "create_tickets", "type": "http", "position": {"x": 660, "y": 60}, "data": {"label": "Create tickets", "config": {"method": "POST", "url": "https://tickets.api/create", "body": "{{ node_results.compare }}"}}}
    ],
    "edges": [
      {"id": "e1", "source": "in", "target": "fetch_live"},
      {"id": "e2", "source": "in", "target": "fetch_desired"},
      {"id": "e3", "source": "fetch_live", "target": "compare"},
      {"id": "e4", "source": "fetch_desired", "target": "compare"},
      {"id": "e5", "source": "compare", "target": "create_tickets"}
    ]
  }
}
