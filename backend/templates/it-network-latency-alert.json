{
  "id": "it-network-latency-alert",
  "title": "IT: Network Latency Alert",
  "description": "Monitor network latency from probes and create incidents when thresholds are exceeded.",
  "category": "IT/Operations",
  "tags": ["it","network","monitoring"],
  "sample_input": {"probe_region":"us-east-1"},
  "graph": {
    "nodes": [
      {"id":"in","type":"input","position":{"x":0,"y":0},"data":{"label":"Probe tick"}},
      {"id":"fetch","type":"http","position":{"x":220,"y":0},"data":{"label":"Fetch probe metrics","config":{"method":"GET","url":"https://monitoring.api/latency?region={{ trigger.probe_region }}"}}},
      {"id":"evaluate","type":"action","position":{"x":440,"y":0},"data":{"label":"Evaluate","config":{"language":"python","code":"m = node_results.fetch\nif m.get('p95',999) > 200:\n  return {'alert':True,'p95':m.get('p95')}\nreturn {'alert':False}"}}},
      {"id":"incident","type":"http","position":{"x":660,"y":0},"data":{"label":"Create incident","config":{"method":"POST","url":"https://incidents.api/create","body":"{{ node_results.evaluate }}"}}}
    ],
    "edges": [
      {"id":"e1","source":"in","target":"fetch"},
      {"id":"e2","source":"fetch","target":"evaluate"},
      {"id":"e3","source":"evaluate","target":"incident"}
    ]
  }
}
