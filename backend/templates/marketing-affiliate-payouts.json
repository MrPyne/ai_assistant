{
  "id": "marketing-affiliate-payouts",
  "title": "Marketing: Affiliate Payouts Automation",
  "description": "Calculate affiliate earnings, generate payout files and notify finance for disbursement.",
  "category": "Marketing",
  "tags": ["marketing","finance","affiliate"],
  "sample_input": {"period":"2025-08"},
  "graph": {"nodes":[{"id":"in","type":"input","position":{"x":0,"y":0},"data":{"label":"Monthly trigger"}},{"id":"calc","type":"action","position":{"x":220,"y":0},"data":{"label":"Calculate earnings","config":{"language":"python","code":"# placeholder: compute earnings from events\nreturn {'payouts':[{'affiliate_id':'aff-1','amount':100.0}]}"}}},{"id":"csv","type":"action","position":{"x":440,"y":0},"data":{"label":"Generate CSV","config":{"language":"python","code":"import csv\nbuf = io.StringIO()\nw = csv.writer(buf)\nw.writerow(['affiliate_id','amount'])\nfor p in input.get('payouts',[]):\n  w.writerow([p['affiliate_id'],p['amount']])\nreturn buf.getvalue()"}}},{"id":"upload","type":"http","position":{"x":660,"y":0},"data":{"label":"Upload to Finance","config":{"method":"POST","url":"https://finance.api/payouts","body":"{{ node_results.csv }}"}}}],"edges":[{"id":"e1","source":"in","target":"calc"},{"id":"e2","source":"calc","target":"csv"},{"id":"e3","source":"csv","target":"upload"}]}
}