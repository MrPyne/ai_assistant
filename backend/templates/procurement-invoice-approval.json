{
  "id": "procurement-invoice-approval",
  "title": "Procurement: Invoice Approval",
  "description": "Route supplier invoices for matching and approval; flag mismatches and notify AP team.",
  "category": "Procurement",
  "tags": ["procurement","invoice","approval"],
  "sample_input": {"invoice_id":"INV-100"},
  "graph": {
    "nodes": [
      {"id":"in","type":"input","position":{"x":0,"y":0},"data":{"label":"Invoice received"}},
      {"id":"fetch_invoice","type":"http","position":{"x":220,"y":0},"data":{"label":"Get Invoice","config":{"method":"GET","url":"https://proc.api/invoices/{{ trigger.invoice_id }}"}}},
      {"id":"match","type":"action","position":{"x":440,"y":0},"data":{"label":"Match PO","config":{"language":"python","code":"inv = json.loads(input.get('body','{}'))\n# compare to PO\nreturn {'match': True}"}}},
      {"id":"approve","type":"http","position":{"x":660,"y":0},"data":{"label":"Approve","config":{"method":"POST","url":"https://proc.api/invoices/{{ trigger.invoice_id }}/approve"}}},
      {"id":"alert","type":"http","position":{"x":660,"y":120},"data":{"label":"Alert AP","config":{"method":"POST","url":"https://hooks.slack.com/services/...","body":"Invoice {{ trigger.invoice_id }} mismatch"}}}
    ],
    "edges": [
      {"id":"e1","source":"in","target":"fetch_invoice"},
      {"id":"e2","source":"fetch_invoice","target":"match"},
      {"id":"e3","source":"match","target":"approve"},
      {"id":"e4","source":"match","target":"alert"}
    ]
  }
}