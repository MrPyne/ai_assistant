{
  "id": "reporting-monthly-kpis",
  "title": "Reporting: Monthly KPIs",
  "description": "Generate monthly KPI snapshot and distribute to stakeholders with visualizations.",
  "category": "Reporting",
  "tags": ["reporting", "kpis", "dashboards"],
  "sample_input": {"month": "2025-07"},
  "graph": {
    "nodes": [
      {
        "id": "in",
        "type": "input",
        "position": {"x": 0, "y": 0},
        "data": {"label": "Monthly"}
      },
      {
        "id": "run_queries",
        "type": "action",
        "position": {"x": 220, "y": 0},
        "data": {
          "label": "Run queries",
          "config": {
            "language": "sql",
            "code": "-- multiple KPI queries\nSELECT count(*) as users FROM users WHERE created_at > '2025-07-01'"
          }
        }
      },
      {
        "id": "visualize",
        "type": "action",
        "position": {"x": 440, "y": 0},
        "data": {
          "label": "Create visuals",
          "config": {
            "language": "python",
            "code": "# generate charts\nreturn {'url':'https://charts.api/chart/1'}"
          }
        }
      },
      {
        "id": "publish",
        "type": "http",
        "position": {"x": 660, "y": 0},
        "data": {
          "label": "Publish",
          "config": {
            "method": "POST",
            "url": "https://email.api/send",
            "body": "KPI report {{ node_results.visualize.url }}"
          }
        }
      }
    ],
    "edges": [
      {"id": "e1", "source": "in", "target": "run_queries"},
      {"id": "e2", "source": "run_queries", "target": "visualize"},
      {"id": "e3", "source": "visualize", "target": "publish"}
    ]
  }
}
