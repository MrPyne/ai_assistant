{
  "id": "stock-price-alert",
  "title": "Stock Price Alert (HTTP -> Threshold -> Notify)",
  "description": "Poll a stock price API or receive streaming updates; when a threshold is crossed, notify via Slack or email.",
  "category": "Monitoring",
  "tags": ["stocks","monitoring","alert","slack"],
  "note": "Useful for finance teams. Use scheduler or webhook depending on data source.",
  "sample_input": { "symbol": "ACME", "threshold": 150.0 },
  "graph": {
    "nodes": [
      {"id":"in","type":"input","position":{"x":0,"y":0},"data":{"label":"Scheduler/HTTP Trigger","config":{}}},
      {"id":"fetch","type":"http","position":{"x":220,"y":0},"data":{"label":"Fetch Price","config":{"method":"GET","url":"https://api.marketdata.example/prices?symbol={{ trigger.symbol }}"}}},
      {"id":"check","type":"action","position":{"x":440,"y":0},"data":{"label":"Check Threshold","config":{"language":"python","code":"price = float(node_results.fetch.price)\nif price > float(input.threshold):\n    return {'alert': True, 'price': price}\nreturn {'alert': False, 'price': price}"}}},
      {"id":"notify","type":"webhook","position":{"x":660,"y":0},"data":{"label":"Notify","config":{"url":"https://hooks.slack.com/services/T/XXX/YYY","payload":"{\"text\":\"{{ trigger.symbol }} price at {{ node_results.check.price }} crossed threshold\"}"}}}
    ],
    "edges": [
      {"id":"e1","source":"in","target":"fetch"},
      {"id":"e2","source":"fetch","target":"check"},
      {"id":"e3","source":"check","target":"notify","condition":"{{ node_results.check.alert }}"}
    ]
  }
}